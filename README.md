# 本脚本涉及文件移除，请仔细阅读下方说明，以免数据丢失！

## 特性

1. 资源占用较低，适合家宽+低配置nas
2. 可同时订阅多个站点，并可设置优先级
3. 通过计划任务定期运行，可确保较高的刷流效率

## 配置及使用说明

1. 准备一个无现有任务的transmission daemon。可通过`-g`参数指定不同的配置目录，并设置不同的rpc端口，独立于用来保种的tr。
2. 确保安装`python3`和`python3-pip`，然后执行`pip3 install -r requirements.txt`
3. 确保脚本`ptrss.py`和配置文件`ptrss.json`处于同一目录下，然后编辑`ptrss.json`:
* **rpc_url:** transmisson rpc地址。注意端口号是否正确（不要填成保种tr的端口!!)
* **username:** rpc/web控制台用户名
* **passwd:** rpc/web控制台密码
* **seeding_days:** 需要保种的天数。因默认在nas上运行，所以是从下载完成时间开始计算，超过此值会将种子连同数据一起移除。
* **path:** 下载目录的**完整**路径
* **disk_free:** 磁盘剩余空间阈值(GB)。当低于此值时停止添加新任务。
* **rss_list:** 需要订阅的rss地址列表，可设置为1至多个，用`,`隔开（最后一项后不用加逗号），越靠后的地址优先级越高。目前支持NexusPHP架构的各大内站，本脚本不执行任何过滤操作，请在获取订阅地址时设置好。
4. 先执行一遍`python3 ptrss.py`，确保无报错且成功添加一个任务，然后通过cron等计划任务工具定期运行，建议每10分钟运行一次。
5. 后续可通过编辑"rss_list"更新订阅地址，包括调整排序以改变优先级。

## 注意事项

由于本脚本会在检测到有未完成任务时停止添加新任务，所以请在设置rss时避免包含迟迟不能出种的种子，且应定期检查是否因撤种而导致卡住的任务，否则极大影响效率。

## 免责声明

请千万不要设置成对用来保种的tr进行操作，若造成数据丢失，本人概不负责。
